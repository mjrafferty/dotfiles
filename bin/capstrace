#! /bin/bash

readonly ARGS="$*"
readonly ARGA=("$@")

_usage() {
  cat <<- EOF
  This is the usage
EOF
}

main () {

  if [ -z "$ARGS" ] || [[ "$ARGS" =~ --help$|-h$ ]]; then
    _usage;
    return 0;
  fi

  false;

  while [[ $? -ne 0 ]]; do

    sleep 0.25s;

    printf "\r%s" "$(date)";

    strace -fTrvs200000 -o ~/strace -p"$(lsof -tf -- /tmp/flag)";

  done 2>/dev/null

}

main;
